edition = "2023";  // successor to proto2 and proto3

package central;

import "storage/cluster.proto";
import "google/protobuf/go_features.proto";

option go_package = "./internalapi/central;central";
option features.(pb.go).api_level = API_HYBRID;
option features.field_presence = IMPLICIT;
option features.enum_type = OPEN;
// `packed=false` needs to be transformed to field-level repeated_field_encoding
// features in Editions syntax
option features.json_format = ALLOW;
option features.utf8_validation = VERIFY;

message DeploymentEnvironmentUpdate {
  repeated string environments = 1;
}

message ClusterStatusUpdate {
  // Making it a oneof for future proofing.
  oneof msg {
    storage.ClusterStatus status = 1 [lazy = true];
    DeploymentEnvironmentUpdate deployment_env_update = 2;
  }
}

message RawClusterHealthInfo {
  storage.CollectorHealthInfo collector_health_info = 1 [lazy = true];
  storage.AdmissionControlHealthInfo admission_control_health_info = 2 [lazy = true];
  storage.ScannerHealthInfo scanner_health_info = 3 [lazy = true];
}

message ClusterHealthResponse {}
