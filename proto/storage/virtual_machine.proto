syntax = "proto3";

package storage;

import "google/protobuf/timestamp.proto";

// TODO (ROX-30352): Review this whole proto for GA readiness.  Lots of copypasta.
message VirtualMachine {
  string id = 1; // @gotags: sql:"pk,type(uuid)" search:"Virtual Machine ID,store"
  string namespace = 2; // @gotags: search:"Namespace,store"
  string name = 3; // @gotags: search:"Virtual Machine Name,store"
  string cluster_id = 4; // @gotags: search:"Cluster ID,hidden,store"  sql:"type(uuid)"
  string cluster_name = 5;
  map<string, string> facts = 6;

  google.protobuf.Timestamp last_updated = 7;

  enum Note {
    MISSING_METADATA = 0;
    MISSING_SCAN_DATA = 1;
    MISSING_SIGNATURE = 2;
    MISSING_SIGNATURE_VERIFICATION_DATA = 3;
  }
  repeated Note notes = 8;

  int32 vsock_cid = 9;
  enum State {
    UNKNOWN = 0;
    STOPPED = 1;
    RUNNING = 2;
  }
  State state = 10;
}
