package protoutils

import (
	"testing"

	golangProto "github.com/golang/protobuf/proto"
	"github.com/stackrox/rox/pkg/fixtures"
	"github.com/stackrox/rox/pkg/protocompat"
)

// This benchmark uses autogenerated clones
func BenchmarkGoGoProtoClone(b *testing.B) {
	st := fixtures.GetImage()
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		_ = protocompat.Clone(st)
	}
}

// This benchmark uses reflection
func BenchmarkGolangProtoClone(b *testing.B) {
	st := fixtures.GetImage()
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		_ = golangProto.Clone(st)
	}
}

func BenchmarkAutogeneratedClone(b *testing.B) {
	st := fixtures.GetImage()
	b.ResetTimer()
	for i := 0; i < b.N; i++ {
		_ = st.CloneVT()
	}
}
