tests:
- server:
    visibleSchemas:
    - openshift-4.1.0
  tests:
  - name: "Injected CA bundle has no data"
    expect: |
      assertThat(.configmaps["injected-cabundle-stackrox-secured-cluster-services"].stringData == null)
  - name: "Injected CA bundle has a proper label"
    expect: |
      assertThat(.configmaps["injected-cabundle-stackrox-secured-cluster-services"].metadata.labels["config.openshift.io/inject-trusted-cabundle"] == "true")
  - name: "Injected CA bundle has no owners"
    expect: |
      assertThat(.configmaps["injected-cabundle-stackrox-secured-cluster-services"].metadata.ownerReferences == null)
- server:
    availableSchemas:
      - openshift-3.11.0
  tests:
  - name: "No injected CA bundle on "
    expect: |
      assertThat(.configmaps["injected-cabundle-stackrox-secured-cluster-services"] == null)
