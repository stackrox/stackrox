name: Download Repo2CPE
on:
  push:
    branches:
    - "yli3/**"
  schedule:
  - cron: "0 */3 * * *"

jobs:
  download:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Create Repo2CPE directory
      run: mkdir Repo2CPE

    - name: Download repository-to-cpe.json
      run: |
        cd Repo2CPE
        wget -q https://access.redhat.com/security/data/metrics/repository-to-cpe.json
      # Alternatively, you can use curl:
      # run: |
      #   cd Repo2CPE
      #   curl -sSL -O https://access.redhat.com/security/data/metrics/repository-to-cpe.json

    - name: Check downloaded file
      run: ls -l Repo2CPE/repository-to-cpe.json
