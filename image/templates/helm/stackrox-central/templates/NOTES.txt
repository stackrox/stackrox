{{- $_ := include "srox.init" . -}}

StackRox {{.Chart.AppVersion}} has been installed.

{{ if include "srox.checkGenerated" (list . "central.adminPassword.value") -}}
An administrator password has been generated automatically. Use username 'admin' and the following
password to log in for initial setup:

  {{ ._rox.central._adminPassword.value }}

{{ end -}}

{{ if ._rox._state.notes -}}
Please take note of the following:
{{ range ._rox._state.notes }}
- {{ . | wrapWith 98 "\n  " -}}
{{ end }}

{{ end -}}

{{ if ._rox._state.generated -}}
One or several values were automatically generated by Helm. In order to reproduce this deployment
in the future, you can export these values by running

  $ kubectl -n {{ .Release.Namespace }} get secret {{ ._rox._state.generatedName }} \
      -o go-template='{{ `{{ index .data "generated-values.yaml" }}` }}' | \
      base64 --decode >generated-values.yaml

This file might contain sensitive data, so store it in a safe place.

{{ end -}}

{{ if ._rox._state.warnings -}}
When installing StackRox, the following warnings were encountered:
{{ range ._rox._state.warnings }}
- WARNING: {{ . | wrapWith 98 "\n  " -}}
{{ end }}

{{ end -}}

{{ if ._rox.env.openshift -}}
IMPORTANT: You have deployed into an OpenShift-enabled cluster. If you see that your pods
           are not scheduling, run

             oc annotate namespace/stackrox --overwrite openshift.io/node-selector=""

{{ end -}}

Thank you for using StackRox!
