load("@io_bazel_rules_go//go:def.bzl", "go_library")

go_library(
    name = "helper",
    srcs = [
        "collector.go",
        "env.go",
        "helper.go",
        "http.go",
        "k8s.go",
        "trace.go",
    ],
    importpath = "github.com/stackrox/rox/sensor/tests/helper",
    visibility = ["//visibility:public"],
    deps = [
        "//generated/api/v1:api",
        "//generated/internalapi/central",
        "//generated/internalapi/sensor",
        "//generated/storage",
        "//pkg/centralsensor",
        "//pkg/concurrency",
        "//pkg/containerid",
        "//pkg/env",
        "//pkg/k8sutil",
        "//pkg/mtls",
        "//pkg/net",
        "//pkg/set",
        "//pkg/sync",
        "//pkg/utils",
        "//pkg/uuid",
        "//sensor/common/centralclient",
        "//sensor/common/clusterid",
        "//sensor/debugger/central",
        "//sensor/debugger/certs",
        "//sensor/debugger/collector",
        "//sensor/debugger/message",
        "//sensor/kubernetes/client",
        "//sensor/kubernetes/sensor",
        "//sensor/testutils",
        "@com_github_cenkalti_backoff_v3//:backoff",
        "@com_github_cloudflare_cfssl//csr",
        "@com_github_cloudflare_cfssl//initca",
        "@com_github_pkg_errors//:errors",
        "@com_github_stretchr_testify//assert",
        "@com_github_stretchr_testify//require",
        "@io_k8s_api//apps/v1:apps",
        "@io_k8s_api//core/v1:core",
        "@io_k8s_api//networking/v1:networking",
        "@io_k8s_api//rbac/v1:rbac",
        "@io_k8s_apimachinery//pkg/api/errors",
        "@io_k8s_apimachinery//pkg/apis/meta/v1:meta",
        "@io_k8s_apimachinery//pkg/apis/meta/v1/unstructured",
        "@io_k8s_apimachinery//pkg/labels",
        "@io_k8s_apimachinery//pkg/runtime/schema",
        "@io_k8s_apimachinery//pkg/types",
        "@io_k8s_client_go//dynamic",
        "@io_k8s_client_go//plugin/pkg/client/auth/gcp",
        "@io_k8s_sigs_e2e_framework//klient/conf",
        "@io_k8s_sigs_e2e_framework//klient/decoder",
        "@io_k8s_sigs_e2e_framework//klient/k8s",
        "@io_k8s_sigs_e2e_framework//klient/k8s/resources",
        "@io_k8s_sigs_e2e_framework//klient/wait",
        "@io_k8s_sigs_e2e_framework//klient/wait/conditions",
        "@io_k8s_sigs_e2e_framework//pkg/envconf",
        "@org_golang_google_grpc//:grpc",
        "@org_golang_google_grpc//credentials/insecure",
        "@org_golang_google_grpc//test/bufconn",
    ],
)

alias(
    name = "go_default_library",
    actual = ":helper",
    visibility = ["//visibility:public"],
)
